{"version":3,"file":"initConnection.js","sourceRoot":"","sources":["../src/initConnection.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,qBAAqB,CAAC;AAG/C,OAAO,EAAE,uBAAuB,EAAE,MAAM,mCAAmC,CAAC;AAE5E,OAAO,EAAE,WAAW,EAAE,MAAM,oBAAoB,CAAC;AAEjD,MAAM,CAAC,MAAM,cAAc,GAAG,KAAK,EAAE,GAAQ,EAAE,EAAE;IAC/C,MAAM,GAAG,GAAG,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IACtC,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;IAE7B,MAAM,QAAQ,CAAC,gBAAgB,CAA4B;QACzD,WAAW,EAAE;YACX,kBAAkB,EAAE,uBAAuB;SAC5C;QACD,OAAO,EAAE,EAAE,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE;QAC7B,MAAM,EAAE,CAAC,GAAG,CAAC;QACb,GAAG;KACJ,CAAC,CAAC;IACH,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;AAC/C,CAAC,CAAC","sourcesContent":["import { Messages } from \"@mjt-engine/message\";\nimport type { Env } from \"./Env\";\n\nimport { textgenGenerateListener } from \"./textgen/textgenGenerateListener\";\nimport type { TextgenConnectionMap } from \"@mjt-services/textgen-common-2025\";\nimport { assertValue } from \"@mjt-engine/assert\";\n\nexport const initConnection = async (env: Env) => {\n  const url = assertValue(env.NATS_URL);\n  console.log(\"NATS_URL\", url);\n\n  await Messages.createConnection<TextgenConnectionMap, Env>({\n    subscribers: {\n      \"textgen.generate\": textgenGenerateListener,\n    },\n    options: { log: console.log },\n    server: [url],\n    env,\n  });\n  console.log(\"initConnection: init complete\");\n};\n"]}